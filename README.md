<!-- å±…ä¸­å¯¹é½å›¾ç‰‡ -->
<p align='center'>
  <img src="https://github.com/Zzaphkiel/Seraphine/assets/60383222/78c14456-8f8e-4137-a6bc-20896c382c1a">
</p>

<!-- å±…ä¸­å¯¹é½æ–‡æœ¬ -->
<p align='center'>
  åŸºäº LCU API å®ç°çš„è‹±é›„è”ç›Ÿæˆ˜ç»©æŸ¥è¯¢å·¥å…·
</p>

<!-- æ·»åŠ å¾½ç« é“¾æ¥ -->
<p align='center'>
  <a href="https://github.com/Zzaphkiel/Seraphine/blob/main/LICENSE">
    <img src="https://img.shields.io/github/license/Zzaphkiel/Seraphine?style=flat&label=License">
  </a>
  <a href="https://github.com/Zzaphkiel/Seraphine/forks">
    <img src="https://img.shields.io/github/forks/Zzaphkiel/Seraphine?style=flat&label=Forks">
  </a>
  <a href="https://github.com/Zzaphkiel/Seraphine/stargazers">
    <img src="https://img.shields.io/github/stars/Zzaphkiel/Seraphine?style=flat&label=Stars">
  </a>
  <a href="https://github.com/Zzaphkiel/Seraphine/releases">
    <img src="https://img.shields.io/github/downloads/Zzaphkiel/Seraphine/total?style=flat&label=Downloads">
  </a>
</p>



<section style="text-align: center;">
  <figure>
    <img src="https://github.com/Zzaphkiel/Seraphine/assets/60383222/78c14456-8f8e-4137-a6bc-20896c382c1a" alt="Seraphine logo">
  </figure>
  <div>
    <h1>åŸºäº LCU API å®ç°çš„è‹±é›„è”ç›Ÿæˆ˜ç»©æŸ¥è¯¢å·¥å…·</h1>
    <div class="badges">
      <a href="https://github.com/Zzaphkiel/Seraphine/blob/main/LICENSE">
        <img src="https://img.shields.io/github/license/Zzaphkiel/Seraphine?style=flat&label=License">
      </a>
      <a href="https://github.com/Zzaphkiel/Seraphine/forks">
        <img src="https://img.shields.io/github/forks/Zzaphkiel/Seraphine?style=flat&label=Forks">
      </a>
      <a href="https://github.com/Zzaphkiel/Seraphine/stargazers">
        <img src="https://img.shields.io/github/stars/Zzaphkiel/Seraphine?style=flat&label=Stars">
      </a>
      <a href="https://github.com/Zzaphkiel/Seraphine/releases">
        <img src="https://img.shields.io/github/downloads/Zzaphkiel/Seraphine/total?style=flat&label=Downloads">
      </a>
    </div>
  </div>
</section>

```css
.container {
    width: 100%;  /* è®¾å®šå®¹å™¨å®½åº¦ä¸ºçˆ¶å…ƒç´ çš„100% */
    max-width: 900px; /* å®¹å™¨çš„æœ€å¤§å®½åº¦ä¸º900pxï¼Œé˜²æ­¢åœ¨å¤§å±å¹•ä¸Šè¿‡å®½ */
    height: auto; /* é«˜åº¦æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´ */
    border: 2px solid black; /* è¾¹æ¡†ä¸º2pxå®½çš„é»‘è‰²å®çº¿ */
    border-radius: 10px; /* è¾¹æ¡†åœ†è§’åŠå¾„ä¸º10px */
    box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* é˜´å½±æ•ˆæœï¼Œå››å‘¨å¾®é»‘ */
    padding: 10px; /* å®¹å™¨å†…éƒ¨ä¸å†…å®¹ä¹‹é—´çš„ç©ºé—´ä¸º10px */
    margin: 20px auto; /* å¤–è¾¹è·ä¸ºä¸Šä¸‹20pxï¼Œå·¦å³è‡ªåŠ¨å±…ä¸­ */
    display: flex; /* ä½¿ç”¨Flexboxå¸ƒå±€ */
    flex-direction: column; /* ä¸»è½´æ–¹å‘ä¸ºå‚ç›´æ–¹å‘ */
    align-items: center; /* å­é¡¹æ²¿äº¤å‰è½´ï¼ˆæ­¤å¤„ä¸ºæ°´å¹³æ–¹å‘ï¼‰å±…ä¸­å¯¹é½ */
    position: relative; /* ç›¸å¯¹å®šä½ï¼Œä¾¿äºåç»­ç»å¯¹å®šä½çš„å­å…ƒç´ å®šä½ */
}
.container:before {
    content: "Project 1"; /* ä¼ªå…ƒç´ å†…å®¹ä¸º"Project 1" */
    position: absolute; /* ç»å¯¹å®šä½ï¼Œç›¸å¯¹äº.containerå®šä½ */
    top: 1px; /* è·ç¦»å®¹å™¨é¡¶éƒ¨1px */
    left: 50%; /* å·¦ä¾§ä½ç½®50%ï¼Œå³å±…ä¸­ */
    transform: translateX(-50%); /* é€šè¿‡å‘å·¦å¹³ç§»50%æ¥ç²¾ç¡®å±…ä¸­ */
    font-weight: bold; /* å­—ä½“åŠ ç²— */
    color: black; /* å­—ä½“é¢œè‰²ä¸ºé»‘è‰² */
    font-size: 18px; /* å­—ä½“å¤§å°ä¸º18px */
}
.core {
    width: 90%; /* å®½åº¦ä¸ºçˆ¶å…ƒç´ çš„90% */
    min-height: 60px; /* æœ€å°é«˜åº¦ä¸º60px */
    display: flex; /* ä½¿ç”¨Flexboxå¸ƒå±€ */
    flex-direction: row; /* ä¸»è½´æ–¹å‘ä¸ºæ°´å¹³æ–¹å‘ */
    justify-content: space-between; /* å­å…ƒç´ ä¹‹é—´çš„é—´è·å¹³å‡åˆ†å¸ƒ */
    align-items: center; /* å­å…ƒç´ åœ¨äº¤å‰è½´ä¸Šå±…ä¸­å¯¹é½ */
    padding: 5px; /* å†…è¾¹è·5px */
    margin-top: 20px; /* é¡¶éƒ¨å¤–è¾¹è·ä¸º20px */
    background-color: #7f788b; /* èƒŒæ™¯è‰²ä¸ºæ·¡ç´«ç°è‰² */
    border-radius: 8px; /* è¾¹æ¡†åœ†è§’ä¸º8px */
    position: relative; /* ç›¸å¯¹å®šä½ï¼Œå¯èƒ½ç”¨äºåç»­ç»å¯¹å®šä½çš„å­å…ƒç´  */
}
.core:before {
    content: attr(data-name); /* ä¼ªå…ƒç´ å†…å®¹æ¥è‡ªdata-nameå±æ€§ */
    position: absolute; /* ç»å¯¹å®šä½ï¼Œç›¸å¯¹äº.coreå®šä½ */
    top: -8px; /* é¡¶éƒ¨å¤–è¶…å‡º-8pxï¼Œæ˜¾ç¤ºåœ¨.coreå¤–éƒ¨ */
    left: 50%; /* å·¦ä¾§ä½ç½®50%ï¼Œå±…ä¸­ */
    transform: translateX(-50%); /* é€šè¿‡å‘å·¦å¹³ç§»50%æ¥ç²¾ç¡®å±…ä¸­ */
    font-weight: bold; /* å­—ä½“åŠ ç²— */
    color: rgb(168, 37, 52); /* å­—ä½“é¢œè‰²ä¸ºæ·±çº¢è‰² */
}
.epi {
    width: 30%; /* å®½åº¦ä¸ºçˆ¶å…ƒç´ çš„30% */
    height: auto; /* é«˜åº¦æ ¹æ®å†…å®¹è‡ªåŠ¨è°ƒæ•´ */
    padding: 5px; /* å†…è¾¹è·5px */
    background-color: darkgray; /* èƒŒæ™¯è‰²ä¸ºæ·±ç°è‰² */
    border-radius: 5px; /* è¾¹æ¡†åœ†è§’ä¸º5px */
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* é˜´å½±æ•ˆæœï¼Œè½»å¾® */
    text-align: center; /* æ–‡æœ¬å±…ä¸­å¯¹é½ */
    color: black; /* å­—ä½“é¢œè‰²ä¸ºé»‘è‰² */
    display: flex; /* ä½¿ç”¨Flexboxå¸ƒå±€ */
    flex-direction: column; /* ä¸»è½´æ–¹å‘ä¸ºå‚ç›´æ–¹å‘ */
    justify-content: space-between; /* å­å…ƒç´ é—´éš”å‡åŒ€ */
    align-items: center; /* å­å…ƒç´ åœ¨äº¤å‰è½´ä¸Šå±…ä¸­å¯¹é½ */
}
.epi-name {
    width: 100%; /* å®½åº¦ä¸º100%ï¼Œå³å æ»¡çˆ¶å…ƒç´ å®½åº¦ */
    font-size: 16px; /* å­—ä½“å¤§å°ä¸º16px */
    font-weight: bold; /* å­—ä½“åŠ ç²— */
    color: white; /* å­—ä½“é¢œè‰²ä¸ºç™½è‰² */
    padding: 5px 0; /* ä¸Šä¸‹å†…è¾¹è·5pxï¼Œå·¦å³æ— å†…è¾¹è· */
    background-color: black; /* èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰² */
    border-radius: 8px; /* è¾¹æ¡†åœ†è§’ä¸º8px */
}
.node {
    width: 48%; /* å®½åº¦ä¸ºçˆ¶å…ƒç´ çš„48% */
    height: 30px; /* é«˜åº¦å›ºå®šä¸º30px */
    background-color: #e0e0e0; /* èƒŒæ™¯è‰²ä¸ºæµ…ç°è‰² */
    color: rgb(79, 165, 207); /* å­—ä½“é¢œè‰²ä¸ºå¤©è“è‰² */
    border-radius: 5px; /* è¾¹æ¡†åœ†è§’ä¸º5px */
    line-height: 30px; /* è¡Œé«˜ä¸º30pxï¼Œä½¿æ–‡å­—å‚ç›´å±…ä¸­ */
    text-align: center; /* æ–‡æœ¬æ°´å¹³å±…ä¸­å¯¹é½ */
    margin-top: 5px; /* é¡¶éƒ¨å¤–è¾¹è·ä¸º5px */





è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºï¼Œå½“é€šè¿‡æŒ‰é’®ç‚¹å‡»æ›´æ”¹æ—¥æœŸåï¼ŒåŸæœ¬ç»‘å®šåœ¨æŒ‰é’®ä¸Šçš„äº‹ä»¶å¤„ç†å™¨å› ä¸º innerHTML çš„æ›´æ–°è¢«ç§»é™¤äº†ã€‚è¿™æ„å‘³ç€æ–°ç”Ÿæˆçš„â€œæ›´æ”¹â€æŒ‰é’®æ²¡æœ‰å†æ¬¡ç»‘å®šå¿…è¦çš„äº‹ä»¶å¤„ç†å™¨ï¼Œå¯¼è‡´æŒ‰é’®ç‚¹å‡»åæ²¡æœ‰ä»»ä½•å“åº”ã€‚

åœ¨ä¿®æ”¹åçš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘åˆ›å»ºäº†å‡ ä¸ªå‡½æ•°æ¥æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†è¿™äº›æ“ä½œï¼š

showCoreInEpicDue(core_id, epic_stage, card): è¿™ä¸ªå‡½æ•°è´Ÿè´£å‘èµ·è¯·æ±‚è·å–æ—¥æœŸæ•°æ®ï¼Œå¹¶è°ƒç”¨ updateDueDateInCard æ¥æ›´æ–°å¡ç‰‡ä¸Šçš„æ—¥æœŸå’Œé‡æ–°ç»‘å®šäº‹ä»¶ã€‚
updateDueDateInCard(card, due_date, core_id, epic_stage): è¿™ä¸ªå‡½æ•°æ›´æ–°å¡ç‰‡ä¸Šæ˜¾ç¤ºçš„æ—¥æœŸï¼Œå¹¶é‡æ–°è®¾ç½®â€œæ›´æ”¹â€æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ã€‚è¿™ç¡®ä¿æ¯æ¬¡æ›´æ–°HTMLå†…å®¹åï¼Œäº‹ä»¶å¤„ç†å™¨éƒ½ä¼šæ­£ç¡®ç»‘å®šã€‚
displayModal(core_id, epic_stage, due_div): è¿™ä¸ªå‡½æ•°è´Ÿè´£æ˜¾ç¤ºå’Œè®¾ç½®æ¨¡æ€çª—å£ã€‚å¦‚æœæ¨¡æ€çª—å£ä¸å­˜åœ¨ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ï¼ŒåŒæ—¶è®¾ç½®å…³é—­æŒ‰é’®å’Œæäº¤æŒ‰é’®çš„äº‹ä»¶ã€‚
fetchDueDate(core_id, epic_stage, days, due_div): å½“ç”¨æˆ·è¾“å…¥å¤©æ•°å¹¶æäº¤æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å®ƒè´Ÿè´£å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ›´æ–°æ—¥æœŸï¼Œå¹¶è°ƒç”¨ updateDueDateInCard æ¥æ›´æ–°æ˜¾ç¤ºçš„æ—¥æœŸå’Œé‡æ–°ç»‘å®šäº‹ä»¶ã€‚
é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¯æ¬¡æ›´æ–°æ—¥æœŸæ—¶éƒ½ä¼šç¡®ä¿ç›¸å…³çš„äº‹ä»¶å¤„ç†å™¨è¢«æ­£ç¡®è®¾ç½®ï¼Œé¿å…äº†æŒ‰é’®æ— å“åº”çš„é—®é¢˜ã€‚



```javascript
function showCoreInEpicDue(core_id, epic_stage, card) {
    fetch("/progress/showCoreInEpicDue", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ core_id: core_id, epic_stage: epic_stage })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        const due_date = data.due_date;
        updateDueDateInCard(card, due_date, core_id, epic_stage);
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
    });
}

function updateDueDateInCard(card, due_date, core_id, epic_stage) {
    const due_div = card.querySelector('.due_date');
    due_div.innerHTML = `
        <strong>Due in epic:</strong> ${due_date}
        <div style="padding-left:50px">
            <button class="set_time btn btn-outline-primary">Change</button>
        </div>
    `;

    const changeBtn = due_div.querySelector('.set_time');
    changeBtn.onclick = function() {
        displayModal(core_id, epic_stage, due_div);
    };
}

function displayModal(core_id, epic_stage, due_div) {
    let modal = document.getElementById("myModal");
    if (!modal) {
        modal = document.createElement("div");
        modal.id = "myModal";
        modal.style.display = "none";
        modal.style.position = "fixed";
        modal.style.left = "0";
        modal.style.top = "0";
        modal.style.width = "100%";
        modal.style.height = "100%";
        modal.style.backgroundColor = "rgba(0,0,0,0.4)";
        modal.innerHTML = `
            <div style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%;">
                <span class="close" style="color: #aaa; float: right; font-size: 28px; font-weight: bold;">&times;</span>
                <p>ğŸ“‚ğŸ“‚ğŸ“‚</p>
                <label for="due_dateInput">Input due_date:</label>
                <input type="number" id="due_dateInput" placeholder="Enter due_date">
                <button id="submitdue_date" class="btn btn-primary">Submit</button>
            </div>
        `;
        document.body.appendChild(modal);

        modal.querySelector(".close").onclick = function() {
            modal.style.display = "none";
        };
    }

    modal.style.display = "block";

    const submitBtn = modal.querySelector('#submitdue_date');
    submitBtn.onclick = function() {
        const due_date = document.getElementById("due_dateInput").value;
        modal.style.display = "none";
        fetchDueDate(core_id, epic_stage, due_date, due_div);
    };
}

function fetchDueDate(core_id, epic_stage, due_date_str, due_div) {
    // å°† due_date_str è½¬æ¢ä¸ºæ•´æ•°ï¼Œè¡¨ç¤ºè¦å¢åŠ çš„å¤©æ•°
    const daysToAdd = parseInt(due_date_str, 10);

    // è·å–å½“å‰æ—¥æœŸå¹¶æ·»åŠ æŒ‡å®šçš„å¤©æ•°
    const currentDate = new Date();
    currentDate.setDate(currentDate.getDate() + daysToAdd);
    const futureDate = currentDate.toISOString().split('T')[0];  // æ ¼å¼åŒ–ä¸º YYYY-MM-DD

    fetch("/progress/showCoreInEpicDue", {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ core_id: core_id, epic_stage: epic_stage, due_date: futureDate })
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        const new_due_date = data.due_date;
        updateDueDateInCard(due_div.parentNode, new_due_date, core_id, epic_stage);
    })
    .catch(error => {
        console.error('Error fetching updated due date:', error);
    });
}
```
